
@{
    Layout = null;
}


<div id="ajax_loader" style="position: absolute; left: 50%; top: 50%; z-index: 50000; display: none">
    <b>cargando ...</b>
    <img src="../../../images/loading_page.gif" width="20" height="20" />
</div>

<div class="modal fade" id="modal_advertencia_eliminar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_elimina" aria-hidden="true">
    <div class="modal-dialog modal-dialog_eliminar">
        <div class="modal-content">
            <div class="modal-header header_modal_advertencia">
                <button id="close_modal_eliminar" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title titulo_modal_h3" id="myModalLabel_elimina">Eliminar </h3>
                <input type="hidden" id="usuario_codigo" />
            </div>
            <div class="modal-body text-center">
                ¿Está seguro de eliminar el Usuario?<br />
                <br />
                <div class="form-horizontal">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary pull-left" data-dismiss="modal">Cancelar</button>
                        <input id="btn_elimina_usuario" type="submit" class="btn btn-danger" value="Eliminar" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<form id="id_form_insert" method="POST" name="fileinfo" role="form">
    <div class="modal fade" id="modal_crearusuario" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_agregar" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header header_modal">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title titulo_modal_h3" id="myModalLabel_agregar">Agregar Usuario </h3>
                </div>
                <div class="modal-body text-center">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Codigo </label>
                            </div>
                            <div class="col-lg-5">
                                <input id="codigousuario" type="text"
                                       class="form-control validate[required,custom[ValidaCodigoUsuarioRepetido_Acceso]]"
                                       placeholder="xxxxxx"
                                       data-prompt-position="topRight:-70" style="text-transform: uppercase;">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Nombre </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="nombreusuario" type="text" class="form-control validate[required]" data-prompt-position="topRight:-70">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Clave </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="claveusuario" type="password" class="form-control validate[required]" data-prompt-position="topRight:-70">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Correo </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="correousuario" type="text" class="form-control validate[required]" data-prompt-position="topRight:-70" style="text-transform: lowercase;">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="display:none">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Password correo </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="password" type="password" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="display:none">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>SMTP </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="smtp" type="text" class="form-control ">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="display:none">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Puerto </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="puerto" type="text" class="form-control  numerico_int" value="0" >
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Vendedor</label>
                            </div>
                            <div class="col-lg-9">
                                <input id="vendedor" type="text" class="form-control validate[required] numerico_int" min="1" max="999" data-prompt-position="topRight:-70">
                            </div>
                        </div>
                    </div>

                    <br />
                    <div class="form-horizontal">
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary pull-left" data-dismiss="modal">Cancelar</button>
                            <input id="btn_agregar_usuario" type="submit" class="btn btn-success" value="Crear" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<form id="id_form_edit" method="POST" name="fileinfo" role="form">
    <div class="modal fade" id="modal_editarusuario" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_editar" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header header_modal">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h3 class="modal-title titulo_modal_h3" id="myModalLabel_editar">Editar Usuario </h3>
                </div>
                <div class="modal-body text-center">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Codigo </label>
                            </div>
                            <div class="col-lg-5">
                                <input id="codigousuario_edit" type="text" class="form-control validate[required]" placeholder="xxxx" data-prompt-position="topRight:-70" style="text-transform: uppercase;" readonly>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Nombre </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="nombreusuario_edit" type="text" class="form-control validate[required]" data-prompt-position="topRight:-70">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Clave </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="claveusuario_edit" type="password" class="form-control validate[required]" data-prompt-position="topRight:-70">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Correo </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="correousuario_edit" type="text" class="form-control validate[required]" data-prompt-position="topRight:-70" style="text-transform: lowercase;">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="display:none">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Password correo </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="password_edit" type="password" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="display:none">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>SMTP </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="smtp_edit" type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="display:none">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Puerto </label>
                            </div>
                            <div class="col-lg-9">
                                <input id="puerto_edit" type="text" class="form-control numerico_int">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-lg-3">
                                <label>Vendedor</label>
                            </div>
                            <div class="col-lg-9">
                                <input id="vendedor_edit" type="text" class="form-control validate[required] numerico_int" min="1" max="999" data-prompt-position="topRight:-70">
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="form-horizontal">
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary pull-left" data-dismiss="modal">Cancelar</button>
                            <input id="btn_editar_usuario" type="submit" class="btn btn-success" value="Guardar" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>

<div class="modal fade" id="modal_accesos_usuario" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_accesos_usuario" aria-hidden="true" style="margin-top: 80px">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header header_modal">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="titulo_modal_h3 modal-title" id="myModalLabel_accesos_usuario">Accesos Permitidos<span style="font-size: 16px"></span></h3>
            </div>
            <div class="modal-body">

                <div id="divPartialAccesosUsuario">
                </div>

            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="colg-6 col-xs-6 text-left">
                        <button id="btn_modal_accesos_usuario_cerrar" type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                    <div class="colg-6 col-xs-6">
                        <input id="btn_modal_accesos_usuario_agregar" type="submit" class="btn btn-success" value="Agregar" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_buscar_opciones" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_buscar_opciones" aria-hidden="true" style="margin-top: 80px">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header header_modal">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="titulo_modal_h3 modal-title" id="myModalLabel_buscar_opciones">
                    Buscador de Opciones
                    <span style="font-size: 16px"></span>
                </h3>
                <input type="submit" id="buscar_opcion" value="Refrescar">
                <input type="submit" id="actualizar_opciones" value="Actualizar">
            </div>
            <div class="modal-body">
                <select id="listado_opciones" multiple="multiple" size="15" style="width: 100%">
                    <option value="0">--Cargando Datos--</option>
                </select>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-lg-6 colxs-6 text-left">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                    <div class="col-lg-6 colxs-6">
                        <button id="btn_agregar_opcion_al_usuario" type="button" class="btn btn-success" data-dismiss="modal">Agregar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal_advertencia_eliminar_opcion" tabindex="-1" role="dialog" aria-labelledby="myModalLabel_elimina_opcion" aria-hidden="true">
    <div class="modal-dialog modal-dialog_eliminar_opcion">
        <div class="modal-content">
            <div class="modal-header header_modal_advertencia">
                <button id="close_modal_eliminar_opcion" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h3 class="modal-title titulo_modal_h3" id="myModalLabel_elimina_opcion">Eliminar Opcion</h3>
            </div>
            <div class="modal-body text-center">
                ¿Está seguro de eliminar Opcion?<br />
                <br />
                <div class="form-horizontal">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary pull-left" data-dismiss="modal">Cancelar</button>
                        <input id="btn_elimina_opcion_usuario" type="submit" class="btn btn-danger" value="Eliminar" />
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-4 col-md-4 col-xs-0"></div>
    <div class="col-lg-3 col-md-3 col-xs-6">
        <h3>Administrador Usuarios</h3>
    </div>
    <div class="col-lg-1 col-md-1 col-xs-6">
        <h3><input id="abreModal_crear_usuario" type="submit" class="btn btn-primary" value="+Usuario" /></h3>
    </div>
    <div class="col-lg-4 col-md-4 col-xs-0"></div>
</div>

<div class="row">
    <div class="col-lg-4 col-md-4 col-xs-0"></div>
    <div class="col-lg-4 col-md-4 col-xs-12">
        <div id="partialListadoUsuarios"></div>
    </div>
    <div class="col-lg-4 col-md-4 col-xs-0"></div>
</div>


<script type="text/javascript" class="init">

        var fila_seleccionada = 0;
        var referencia_seleccionada = 0;
        var fila_seleccionada_empresa = 0;
        var usuario = "";
        var table = "";

        $(document).ready(function () {

            cargar_Usuarios();

            $("#btn_modal_accesos_usuario_agregar").click(function (e) {
                e.preventDefault();

                cargarOpciones(usuario);
                $("#modal_buscar_opciones").modal("show");
                $("#input_nombreopcion").val("");
            });

            $("#buscar_opcion").click(function (e) {
                e.preventDefault();

                cargarOpciones(usuario);
                $("#input_nombreopcion").val("");
            });

            $("#actualizar_opciones").click(function (e) {
                e.preventDefault();

                var opciones = [];
                var q = $('.menu_navegacion').length;
                $(".menu_navegacion").each(function () {

                    var element = $(this).text(); // <-- en la variable element tienes tu elemento
                    var padre = $(this).parent();
                    var abuelo = $(padre).parent();
                    var modulo = $(abuelo).data("modulo");
                    var fila = {
                        menu: modulo,
                        nombre: element
                    }
                    opciones.push(fila);
                });

                $("#ajax_loader").css("display", "");

                $.ajax({
                    type: "POST",
                    url: '/Usuarios/Actualizar_Opciones/',
                    data: JSON.stringify({ opciones: opciones }),
                    contentType: "application/json; charset=utf-8",
                    dataType: false,
                    success: function (data) {
                        $("#ajax_loader").hide();
                        if (data.retornoJson == 1) {
                            mostrar_msj_success('Opciones actualizadas');
                            cargarOpciones(usuario);
                        } else if (data.retornoJson == -1) {
                            mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                            window.location.href = "/Acceso/Login";

                        } else {
                            mostrar_msj_error("Error interno. Indique a soporte la descripción del error: " + data);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        mostrar_msj_error(data.errorJson);
                    }
                });

            });

            $("#btn_agregar_opcion_al_usuario").click(function (e) {
                e.preventDefault();

                var opcion = $("#listado_opciones").val();
                $("#ajax_loader").css("display", "");
                $.ajax({
                    type: "POST",
                    url: '/Usuarios/AgregarOpcion/',
                    traditional: true,
                    data: {
                        usuario: usuario,
                        opcion:opcion
                    },
                    DataType: 'json',
                    success: function (data) {
                        $("#ajax_loader").hide();
                        $("#modal_advertencia_eliminar").modal("hide");
                        if (data == "") {
                            //mostrar_msj_success('Opcion agregada');
                            cargarAccesosUsuario(usuario);
                        } else if (data == -1) {
                            mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                            window.location.href = "/Acceso/Login";

                        } else {
                            mostrar_msj_error("Error interno. Indique a soporte la descripción del error: " + data);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        mostrar_msj_error("error de Conexion");
                    }
                });
            });

            $('#btn_elimina_usuario').on('click', function (e) {
                e.preventDefault();
                $("#ajax_loader").css("display", "");
                var codigo = $("#usuario_codigo").val();
                $.ajax({
                    type: "POST",
                    url: '/Usuarios/EliminarUsuario/',
                    traditional: true,
                    data: {
                        codigo: codigo
                    },
                    DataType: 'json',
                    success: function (data) {
                        $("#ajax_loader").hide();
                        $("#modal_advertencia_eliminar").modal("hide");
                        if (data == "") {
                            mostrar_msj_success('Usuario eliminado correctamente');
                            cargar_Usuarios();
                        } else if (data == -1) {
                            mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                            window.location.href = "/Acceso/Login";

                        } else {
                            mostrar_msj_error("Error interno. Indique a soporte la descripción del error: " + data);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        mostrar_msj_error("error de Conexion");
                    }
                });
            });

            $('#abreModal_crear_usuario').on('click', function (e) {
                e.preventDefault();
                $("#modal_crearusuario").modal("show");
                var uuid = Math.random().toString(36).slice(-6);
                $("#modal_crearusuario #codigousuario").val(uuid);
                $("#modal_crearusuario #nombreusuario").val("");
                $("#modal_crearusuario #correousuario").val("");
                $("#modal_crearusuario #claveusuario").val("");
                $("#modal_crearusuario #password").val("");
                $("#modal_crearusuario #smtp").val("");
                $("#modal_crearusuario #puerto").val("");
                $("#modal_crearusuario #vendedor").val("00");
            });

            $('#id_form_insert').validationEngine();
            $('#btn_agregar_usuario').on('click', function (e) {
                e.preventDefault();
                var puerto = ($("#puerto").val() == "") ? 0 : $("#puerto").val();   
                if (!$("#id_form_insert").validationEngine('validate')) {
                    return false;
                    ind_guarda = 0;
                }
                $("#ajax_loader").css("display", "");
                $.ajax({
                    type: "POST",
                    url: '/Usuarios/CrearUsuario/',
                    traditional: true,
                    data: {
                        codigo: $("#codigousuario").val().toUpperCase(),
                        nombre: $("#nombreusuario").val().toLowerCase(),
                        clave: $("#claveusuario").val(),
                        correo: $("#correousuario").val().toLowerCase(),
                        password: $("#password").val(),
                        smtp: $("#smtp").val(),
                        puerto: puerto,
                        vendedor: $("#vendedor").val()
                    },
                    DataType: 'json',
                    success: function (data) {
                        $("#modal_crearusuario").modal("hide");
                        $("#ajax_loader").hide();
                        if (data == "") {
                            mostrar_msj_success('Usuario creado Correctamente');
                            cargar_Usuarios();
                        } else if (data == -1) {
                            mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                            window.location.href = "/Acceso/Login";

                        } else {
                            mostrar_msj_error("Error interno. Indique a soporte la descripción del error: " + data);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        mostrar_msj_error("error de Conexion");
                    }
                });
            });

            $('#id_form_edit').validationEngine();
            $("#btn_editar_usuario").click(function (e) {
                e.preventDefault();
                var puerto = ($("#puerto_edit").val() == "") ? 0 : $("#puerto").val();   
                var ind_guarda = 1;
                if (!$("#id_form_edit").validationEngine('validate')) {
                    return false;
                    ind_guarda = 0;
                }
                $.ajax({
                    type: "POST",
                    url: '/Usuarios/EditarUsuario/',
                    traditional: true,
                    data: {
                        codigo: $("#codigousuario_edit").val().toUpperCase(),
                        nombre: $("#nombreusuario_edit").val().toUpperCase(),
                        clave: $("#claveusuario_edit").val(),
                        correo: $("#correousuario_edit").val().toLowerCase(),
                        password: $("#password_edit").val(),
                        smtp: $("#smtp_edit").val(),
                        puerto: puerto,
                        vendedor: $("#vendedor_edit").val(),
                        referencia: referencia_seleccionada
                    },
                    DataType: 'json',
                    success: function (data) {
                        $("#modal_editarusuario").modal("hide");
                        $("#ajax_loader").hide();
                        if (data == "") {
                            mostrar_msj_success('Usuario editado Correctamente');
                            cargar_Usuarios();
                        } else if (data == -1) {
                            mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                            window.location.href = "/Acceso/Login";

                        } else {
                            mostrar_msj_error("Error interno. Indique a soporte la descripción del error: " + data);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        mostrar_msj_error("error de Conexion");
                    }
                });
            });

            $("#btn_elimina_opcion_usuario").click(function (e) {
                e.preventDefault();

                $("#ajax_loader").css("display", "");
                $.ajax({
                    type: "POST",
                    url: '/Usuarios/EliminarOpcion/',
                    traditional: true,
                    data: {
                        referencia: referencia_seleccionada
                    },
                    DataType: 'json',
                    success: function (data) {
                        $("#ajax_loader").hide();
                        if (data == "") {
                            $("#modal_advertencia_eliminar_opcion").modal("hide");
                            mostrar_msj_success('Opcion eliminada Correctamente');
                            cargarAccesosUsuario(usuario);
                        } else if (data == -1) {
                            mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                            window.location.href = "/../Home/Login";

                        } else {
                            $("#modal_advertencia_eliminar").modal("hide");
                            mostrar_msj_error(data);
                        }
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        mostrar_msj_error("error de Conexion");
                    }
                });
            });

            $('#modal_accesos_usuario').on('shown.bs.modal', function () {
                var table = $('#table_accesos').DataTable();
                table.columns.adjust();
            });

        });

        function cargar_Usuarios() {

            var url_action = '@Html.Raw(Url.Action("partialListadoUsuarios", "Usuarios"))';
            $("#ajax_loader").css("display", "");
            $.ajax({
                async: false,
                contentType: false,
                prSCessData: false,
                type: 'POST',
                url: url_action,
                success: function (result) {
                    $("#ajax_loader").hide();
                    if (result == -1) {
                        mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                        window.location.href = "/../Home/Login";
                    } else {
                        $("#partialListadoUsuarios").html(result);
                    }
                }
            });
        }
        function listar_EmpresasUsuarios(usuario) {
            var url_action = '@Html.Raw(Url.Action("partialEmpresasUsuarios", "Usuarios", new {usuario = "codigousuario_"}))';
            url_action = url_action.replace("codigousuario_", usuario);
            $("#ajax_loader").css("display", "");
            $.ajax({
                async: false,
                contentType: false,
                prSCessData: false,
                type: 'POST',
                url: url_action,
                success: function (result) {
                    $("#ajax_loader").hide();
                    if (result == -1) {
                        mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                        window.location.href = "/../Home/Login";
                    } else {
                        $("#idDivPartialListado_EmpresasUsuarios").html(result);
                    }
                }
            });
        }

        function Cargar_TablaEmpresas_modal() {

            var url_action = '@Html.Raw(Url.Action("partialListadoEmpresas", "Empresas"))';
            $("#ajax_loader").css("display", "");
            $.ajax({
                async: false,
                contentType: false,
                prSCessData: false,
                type: 'POST',
                url: url_action,
                success: function (result) {
                    $("#ajax_loader").hide();
                    if (result == -1) {
                        mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                        window.location.href = "/../Home/Login";
                    } else {
                        $("#idDivPartialListado_listado_empresas").html(result);
                    }
                }
            });
        }

        function cargarOpciones(usuario) {

            $.getJSON('/Usuarios/Getopciones/?usuario=' + usuario, function (district) {

                var items="";
                $("#listado_opciones").empty();
                var count = 0;
                $.each(district, function (i, district) {

                    count = 1;
                    items += "<option value='" + district.nombre + "' data-nombreopcion='" + district.nombre + "'>" + district.nombre + "</option>";
                });
                if (count == 0) {
                    $('#listado_opciones').html("<option value='' data-nombreopcion=''>No hay datos</option>");
                } else {
                    $('#listado_opciones').html(items);
                }
            });
        }

        function cargarAccesosUsuario(usuario) {
            var fd = new FormData();
            fd.append("usuario", usuario);
            $.ajax({
                type: "POST",
                url: '/Usuarios/partialAccesosUsuarios/',
                data: fd,
                DataType: 'json',
                contentType: false,
                processData: false,
                success: function (result) {

                    $("#ajax_loader").hide();
                    if (result == -1) {
                        mostrar_msj_error("Su Sessión a ha expirado. Ingrese al Sistema nuevamente");
                        window.location.href = "/../Home/Login";
                    } else {
                        $("#modal_accesos_usuario").modal("show");
                        $("#divPartialAccesosUsuario").html(result);
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    mostrar_msj_error("error de Conexión: no pudo acceder a la vista");
                }
            });
        }


</script>

